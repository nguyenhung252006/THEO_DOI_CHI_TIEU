-- 1. Tạo database
CREATE DATABASE IF NOT EXISTS QuanLyChiTieu;
USE QuanLyChiTieu;

-- 2. Bảng NguoiDung
CREATE TABLE IF NOT EXISTS NguoiDung (
    id INT AUTO_INCREMENT PRIMARY KEY,
    tai_khoan VARCHAR(50) NOT NULL UNIQUE,
    mat_khau VARCHAR(255) NOT NULL,
    avatar VARCHAR(255)
);

-- 3. Bảng ThongTin
CREATE TABLE IF NOT EXISTS ThongTin (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    ten VARCHAR(50) NOT NULL,
    ngay_sinh DATE NOT NULL,
    tuoi INT,
    email VARCHAR(100),
    so_tien_ban_dau DECIMAL(15,2),
    avatar VARCHAR(255),
    FOREIGN KEY (user_id) REFERENCES NguoiDung(id) ON DELETE CASCADE
);

-- 4. Bảng MucChiTieu
CREATE TABLE IF NOT EXISTS MucChiTieu (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    an_uong DECIMAL(15,2) DEFAULT 0,
    quan_ao DECIMAL(15,2) DEFAULT 0,
    mua_sam DECIMAL(15,2) DEFAULT 0,
    giai_tri DECIMAL(15,2) DEFAULT 0,
    FOREIGN KEY (user_id) REFERENCES NguoiDung(id) ON DELETE CASCADE
);

-- 5. Bảng MucChiTieuKhac
CREATE TABLE IF NOT EXISTS MucChiTieuKhac (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    ten_hoat_dong VARCHAR(100) NOT NULL,
    so_tien DECIMAL(15,2) DEFAULT 0,
    FOREIGN KEY (user_id) REFERENCES NguoiDung(id) ON DELETE CASCADE
);
